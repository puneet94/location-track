doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    title MiiTrace
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    meta(name='description', content='')
    meta(name='author', content='')
    meta(http-equiv="cache-control", content="max-age=0")
    meta(http-equiv="cache-control", content="no-cache")
    meta(http-equiv="expires", content="0")
    meta(http-equiv="expires", content="Tue, 01 Jan 1980 1:00:00 GMT")
    meta(http-equiv="pragma", content="no-cache")
    // Le styles
    link(rel='stylesheet', href='assets/css/style.css')
    link(rel='stylesheet', href='assets/css/loader-style.css')
    //- link(rel='stylesheet', href='assets/css/bootstrap.css')
    link(rel="stylesheet", href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u", crossorigin="anonymous")

    link(rel='stylesheet', type='text/css', href='assets/js/progress-bar/number-pb.css')
    link(rel='stylesheet', type='text/css', href='css/bootstrap-datepicker3.min.css')
    link(type='text/css', rel='stylesheet', href='css/font-awesome.css')
    link(type='text/css', rel='stylesheet', href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css')
    link(type='text/css', rel='stylesheet', href='https://cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.css')


    style(type='text/css').
      canvas#canvas4 {
      position: relative;
      top: 20px;
      }
      .btn{
        font-weight: normal;
        font-family: "Muli", Helvetica, Arial, sans-serif;
        padding: 6px 12px;
        font-size: 14px;
        line-height: 1.42857143;
        border-radius: 0px !important;
      }
      .dropdown-menu {
        padding: 0px;
        border: none!important;
      }
      .bs-searchbox input{
        border-radius: 0;
      }
      .bs-searchbox input:focus{
        border-color: #66afe9!important;
      }
      .search1,.search2{
        margin-top: -7px;
        margin-right: 10px;
      }
      .btn-search,.serachByDate{
        margin-top: -7px;
      }
      .borderless td, .borderless th{
        border: none!important;
        text-align: center;
      }
    // HTML5 shim, for IE6-8 support of HTML5 elements
    //if lt IE 9
      script(src='http://html5shim.googlecode.com/svn/trunk/html5.js')
    // Fav and touch icons
    link(rel='shortcut icon', href='assets/ico/minus.png')
  body
    // Preloader
    #preloader
      #status  
    // TOP NAVBAR
    nav.navbar.navbar-static-top(role='navigation')
      .container-fluid
        // Brand and toggle get grouped for better mobile display
        .navbar-header
          button.navbar-toggle(data-target='#bs-example-navbar-collapse-1', data-toggle='collapse', type='button')
            span.entypo-menu
          button.navbar-toggle.toggle-menu-mobile.toggle-left(type='button')
            span.entypo-list-add
        // Collect the nav links, forms, and other content for toggling
        #bs-example-navbar-collapse-1.collapse.navbar-collapse
          ul.nav.navbar-nav
            li
              
          #nt-title-container.navbar-left.running-text.visible-lg
            ul.date-top
              li.entypo-calendar(style='margin-right:5px')
              li#Date
            ul#digital-clock.digital
              li.entypo-clock(style='margin-right:5px')
              li.hour
              li :
              li.min
              li :
              li.sec
              li.meridiem
            ul#nt-title
              li
                i.wi-day-lightning
                |   London
                b 85
                i.wi-fahrenheit
                |  ; 15km/h
              li
                i.wi-day-lightning
                |   Kent 
                b 85
                i.wi-fahrenheit
                |  ; Tonight- 72 °F (22.2 °C)
              li
                i.wi-day-lightning
                |   Manchester 
                b 85
                i.wi-fahrenheit
                |  ; 15km/h
              li
                i.wi-day-lightning
                |   Brimingham
                b 85
                i.wi-fahrenheit
                |  ; 15km/h
              li
                i.wi-day-lightning
                |   Liverpool 
                b 85
                i.wi-fahrenheit
                |  ; 15km/h
          ul.nav.navbar-nav.navbar-right(style='margin-right:0;')
            li
              a.dropdown-toggle(data-toggle='dropdown', href='#')
                img.admin-pic.img-circle(alt='', src=pic[0].avatar.path.substring(7))
                | Hi, #{user.username} 
                b.caret
              ul.dropdown-setting.dropdown-menu(style='margin-top:14px;', role='menu')
                li
                  a(href='/profile')
                    span.entypo-user
                    |   My Profile
                li
                  a(href='#')
                    span.entypo-vcard
                    |   Change password
                
                li.divider
                li
                  a(href='/logout')
                    span.entypo-logout
                    |   Logout

                
            li
              a.dropdown-toggle(data-toggle='dropdown', href='#')
                span.icon-gear
                |   Setting
              ul.dropdown-setting.dropdown-menu(role='menu')
                li.theme-bg
                  #button-bg
                  #button-bg2
                  #button-bg3
                  #button-bg5
                  #button-bg6
                  #button-bg7
                  #button-bg8
                  #button-bg9
                  #button-bg10
                  #button-bg11
                  #button-bg12
                  #button-bg13
        // /.navbar-collapse
      // /.container-fluid
    // /END OF TOP NAVBAR
    // SIDE MENU
    #skin-select
      #logo.text-center(style="margin-top:31px;")
        h1(style="font-size:20px;")
          span(style="background:none;border-radius:0;font-size:17px;padding:0 0;position:static;text-transform:lowercase;") Mii
          |Dashboard
          p
      a#toggle
        span.entypo-menu
      .dark
      
          
      .skin-part
        #tree-wrap
          .side-bar
            ul.topnav.menu-left-nest
              
             
              li
                a.tooltip-tip.ajax-load(href='/devices', title='Dashboard')
                  i.icon-window
                  span Dashboard
              li
                a.tooltip-tip.ajax-load(href='/addgroup', title='addgroup')
                  i.icon-view-thumb
                  span Add Group
              li
                a.tooltip-tip.ajax-load(href='/adddevice', title='adddevice')
                  i.icon-view-thumb
                  span Add Device
              li
                a.tooltip-tip(href='#', title='Groups')
                  i.icon-user-group
                  span Groups
                ul
                  for g in groups
                    li
                      a.tooltip-tip2.ajax-load(href=g.url, title=g.name)
                        i.icon-user
                        span #{g.name}
              li
                a.tooltip-tip2.ajax-load(href='/profile', title='Profile Page')
                  i.icon-user
                  span Profile 
              li
                a.tooltip-tip2.ajax-load(href='/track', title='Live Tracking')
                  i.icon-user
                  span Live Tracking 
              li
                a.tooltip-tip2(href='/lock', title='Lock Screen')
                  i.icon-lock
                  span Lock Screen
              //- li
              //-   a.tooltip-tip(href='/logout', title='logout')
              //-     i.icon-download
              //-     span Logout

              
            
    // END OF SIDE MENU
    // PAPER WRAP
    .wrap-fluid
      .container-fluid.paper-wrap.bevel.tlbr
        // CONTENT
        // TITLE
        .row
          #paper-top
            .col-sm-2(style="padding-right:0px;")
                h2.tittle-content-header(style="margin-top:6px;")
                  i.icon-window
                  span.text-right
                    | Dashboard
            .col-sm-10
              //- .devider-vertical.visible-lg
              form
                .form-group.col-sm-4#groupbtn(style="padding-left: 0;padding-right: 10px;margin-top:6px;")
                  select.selectpicker.search1.form-control#groupselect(name="group", data-live-search="true", data-done-button="true", title="Search by group", onChange="dynamic()")
                    for g  in groups
                      option(value=g._id) #{g.name} 
                .form-group.col-sm-4#devicebtn(style="display:none; padding-left: 0;padding-right: 10px;margin-top:6px;")
                  select.selectpicker.search2.form-control#deviceselect(name="device", data-live-search="true", title="Search by Device ID")
                    //- for d in devices
                    //-   option(value=d.imei) #{d.imei}
                .col-sm-3.form-group(style="padding-left: 0;padding-right: 10px;")
                  input.form-control(type="text", name="date" required,style="margin-top:-2px;border-radius:0px;")
                .col-sm-1
                  .row   
                    button.btn.btn-info(type="submit",style="margin-top:-2px;padding: 5px!important;") Get data
              
            
        //- #paper-middle
        //-   #mapContainer
        if alertmessage

          .alert.alert-danger.alert-dismissable.fade.in(style="margin-top:10px;")
            a.close(href='#', data-dismiss='alert', aria-label='close') ×
            strong #{alertmessage}
        

        #googleMap(style='width:100%;height:400px;margin-top:10px;')
        br
        br
        .content-wrap
          .row
            //- .col-sm-4
            //-   #profitClose.profit
            //-     .headline
            //-       h3
            //-         span
            //-           i.entypo-battery
            //-           |   Battery
            //-       .titleClose
            //-         a.gone(href='#profitClose')
            //-           span.entypo-cancel
            //-     .value
            //-       span.pull-left
            //-         i.entypo-battery.clock-position
            //-       //- #getting-started
            //-       //-   span %M
            //-       //-   span %S
            //-       #getting-started-custom1
            //-         span 0%
            //-     .progress-tinny
            //-       .bar(style='width: 50%')
                
            .col-sm-6
              #revenueClose.revenue
                .headline
                  h3
                    span
                      i.maki-aboveground-rail
                      |   Distance Covered
                  .titleClose
                    a.gone(href='#revenueClose')
                      span.entypo-cancel
                .value
                  span.pull-left
                    i.maki-aboveground-rail.gauge-position
                  #getting-started-custom2
                    span(style="font-size: 60px;margin-right: 10px;position: relative;top: 0px;") 00 Km
                .progress-tinny
                  .bar(style='width: 25%')
                
            .col-sm-6
              #orderClose.order
                .headline
                  h3
                    span
                      i.entypo-flash
                      |   Calories Burned
                  .titleClose
                    a.gone(href='#orderClose')
                      span.entypo-cancel
                .value
                  span.pull-left
                    i.entypo-flash.gauge-position
                  #getting-started-custom2
                    span(style="font-size: 60px;margin-right: 10px;position: relative;top: 0px;") 00
                .progress-tinny
                  .bar(style='width: 10%')
                
            //- .col-sm-3
            //-   #memberClose.member
            //-     .headline
            //-       h3
            //-         span
            //-           i.fa.fa-truck
            //-           |                                           CARGO
            //-       .titleClose
            //-         a.gone(href='#memberClose')
            //-           span.entypo-cancel
            //-     .value
            //-       span
            //-         i.maki-warehouse
            //-       | 45
            //-       b Sent
            //-     .progress-tinny
            //-       .bar(style='width: 50%')
            //-     .profit-line
            //-       span.entypo-down-circled
            //-       |  50% From Last Month

        .content-wrap
          .row
            .col-sm-12
              #siteClose.nest
                .title-alt
                  h6
                    span.fontawesome-bell
                    |  Log Data
                  .titleClose
                    a.gone(href='#siteClose')
                      span.entypo-cancel
                  .titleToggle
                    a.nav-toggle-alt(href='#site')
                      span.entypo-up-open
                #site.body-nest(style='max-height:250px;overflow-y:auto;')
                  //- .table-responsive
                  //-   table.table
                  //-     thead
                  //-       tr
                  //-         th
                  //-         th
                  //-         th
                  //-     tbody
                  //-       tr
                  //-         td.armada-devider
                  //-           .armada
                  //-             span(style='background:#65C3DF')
                  //-               span.maki-bus
                  //-               |   Trans Berlin
                  //-             p
                  //-               span.entypo-gauge
                  //-               |  12 Km/
                  //-               i Hours
                  //-         td.driver-devider
                  //-           img.armada-pic.img-circle(alt='', src='http://api.randomuser.me/portraits/thumb/men/14.jpg')
                  //-           h3 Mark Zuckerberg
                  //-           br
                  //-           p Driver
                  //-         td.progress-devider
                  //-           section#basic
                  //-             article
                  //-               .number-pb
                  //-                 .number-pb-shown
                  //-                 .number-pb-num 0
                  //-           span.label.pull-left Berlin
                  //-           span.label.pull-right Muchen
                  //-       tr
                  //-         td.armada-devider
                  //-           .armada
                  //-             span(style='background:#45B6B0')
                  //-               span.fontawesome-plane
                  //-               |   Fly Airlines
                  //-             p
                  //-               span.entypo-gauge
                  //-               |  600 Km/
                  //-               i Hours
                  //-         td.driver-devider
                  //-           img.armada-pic.img-circle(alt='', src='http://api.randomuser.me/portraits/thumb/men/38.jpg')
                  //-           h3 Marko Freytag
                  //-           br
                  //-           p Pilot
                  //-         td.progress-devider
                  //-           section#percentage
                  //-             article
                  //-               .number-pb
                  //-                 .number-pb-shown.dream
                  //-                 .number-pb-num 0%
                  //-           span.label.pull-left Berlin
                  //-           span.label.pull-right London
                  //-       tr
                  //-         td.armada-devider
                  //-           .armada
                  //-             span(style='background:#FF6B6B')
                  //-               span.maki-aboveground-rail
                  //-               |   Fazttrain
                  //-             p
                  //-               span.entypo-gauge
                  //-               |  40 Km/
                  //-               i Hours
                  //-         td.driver-devider
                  //-           img.armada-pic.img-circle(alt='', src='http://api.randomuser.me/portraits/thumb/men/39.jpg')
                  //-           h3 Dieter Gruenewald
                  //-           br
                  //-           p machinist
                  //-         td.progress-devider
                  //-           section#step
                  //-             article
                  //-               .number-pb
                  //-                 .number-pb-shown.sun
                  //-                 .number-pb-num 0/0
                  //-           span.label.pull-left Berlin
                  //-           span.label.pull-right Dortmund
                  .table-responsive
                    table.table.borderless
                      thead
                        tr
                          th
                            | Date
                          th
                            | Time
                          th
                            | Latitude
                          th
                            | Longitude
                          th
                            | Battery
                      tbody
                        if data
                          for d in data

                            tr
                              td #{d.date}
                                
                              td #{d.time}
                                 
                              td #{d.latitude}
                              
                              td #{d.longitude}
                                
                              td #{d.battery_level}
                            
                        //- tr
                        //-   td
                        //-     | 12-04-2017
                        //-   td
                        //-     | 4:30 PM
                        //-   td
                        //-     | 44.44
                        //-   td
                        //-     | 33.33

                        //-   td
                        //-     | 50%
                        //- tr
                        //-   td
                        //-     | 12-04-2017
                        //-   td
                        //-     | 4:30 PM
                        //-   td
                        //-     | 44.44
                        //-   td
                        //-     | 33.33
     
                        //-   td
                        //-     | 50%
                        //- tr
                        //-   td
                        //-     | 12-04-2017
                        //-   td
                        //-     | 4:30 PM
                        //-   td
                        //-     | 44.44
                        //-   td
                        //-     | 33.33
       
                        //-   td
                        //-     | 50%
                        //- tr
                        //-   td
                        //-     | 12-04-2017
                        //-   td
                        //-     | 4:30 PM
                        //-   td
                        //-     | 44.44
                        //-   td
                        //-     | 33.33
        
                        //-   td
                        //-     | 50%
                        //- tr
                        //-   td
                        //-     | 12-04-2017
                        //-   td
                        //-     | 4:30 PM
                        //-   td
                        //-     | 44.44
                        //-   td
                        //-     | 33.33
                   
                        //-   td
                        //-     | 50%
                        //- tr
                        //-   td
                        //-     | 12-04-2017
                        //-   td
                        //-     | 4:30 PM
                        //-   td
                        //-     | 44.44
                        //-   td
                        //-     | 33.33
         
                        //-   td
                        //-     | 50%
                        //- tr
                        //-   td
                        //-     | 12-04-2017
                        //-   td
                        //-     | 4:30 PM
                        //-   td
                        //-     | 44.44
                        //-   td
                        //-     | 33.33
              
                        //-   td
                        //-     | 50%
            //- .col-sm-5
            //-   #siteClose.nest
            //-     .title-alt
            //-       h6
            //-         span.fontawesome-user
            //-         |  Profile
            //-       .titleClose
            //-         a.gone(href='#siteClose')
            //-           span.entypo-cancel
            //-       .titleToggle
            //-         a.nav-toggle-alt(href='#site')
            //-           span.entypo-up-open
            //-     #site.body-nest(style='max-height:250px;overflow-y:auto;')
            //-       .col-sm-6.text-center
            //-         img.img-circle(alt='', src='http://api.randomuser.me/portraits/thumb/men/14.jpg', style="border:4px solid rgba(0, 0, 0, 0.1);") 
            //-         h3(style="font-size: 14px;font-weight: bold;margin: 0;") Mark Zukenbeirg    
            //-         p(style="margin:0;") Driver
                      
            //-         //- hr
            //-       .col-sm-6.text-left
            //-         dl.dl-horizontal-profile
            //-           dt User Name
            //-           dd #{user.username}
                      
            //-           dt Email
            //-           dd #{user.email}
            //-           dt Phone
            //-           dd #{user.contact}
            //-           dt Device ID
            //-           dd 7777
            //-           dt Group
            //-           dd Shubhy


        //- .content-wrap
        //-   .row
        //-     .col-sm-6
        //-       #graph1Close.nest
        //-         .title-alt
        //-           h6
        //-             span.fontawesome-truck
        //-             |  Speed Graph
        //-           .titleClose
        //-             a.gone(href='#graph1Close')
        //-               span.entypo-cancel
        //-           .titleToggle
        //-             a.nav-toggle-alt(href='#graph1')
        //-               span.entypo-up-open
        //-         #graph1.body-nest(style='max-height:400px;overflow-y:auto;')

        //-           .chart-wrap
        //-             .chart-dash
        //-               // <div id="sparkline"></div>
        //-               #placeholder1(style='width:100%;height:200px;')
        //-             .row
        //-               .col-sm-8
        //-                 .speed
        //-                   h2 Speed Avarage
        //-                   h1
        //-                     | 74
        //-                     span(style="left:8px;") Km / hours
        //-               .col-sm-4
        //-                 .traffic
        //-                   h2 Traffic per day
        //-                   h1 2.5874
        //-             .row
        //-               .col-sm-4
        //-                 .traffic-rates
        //-                   h4 Traffic Rates
        //-                   h1
        //-                     | 30 %
        //-                     span -1,3 %
        //-               .col-sm-4
        //-                 .traffic-rates
        //-                   h4 Traffic Rates
        //-                   h1
        //-                     | 30 %
        //-                     span -1,3 %
        //-               .col-sm-4
        //-                 .traffic-rates
        //-                   h4 Traffic Rates
        //-                   h1
        //-                     | 30 %
        //-                     span -1,3 %

        //-     .col-sm-6
        //-       #graph2Close.nest
        //-         .title-alt
        //-           h6
        //-             span.fontawesome-truck
        //-             |  Battery Graph
        //-           .titleClose
        //-             a.gone(href='#graph2Close')
        //-               span.entypo-cancel
        //-           .titleToggle
        //-             a.nav-toggle-alt(href='#graph2')
        //-               span.entypo-up-open
        //-         #graph2.body-nest(style='max-height:400px;overflow-y:auto;')

        //-           .chart-wrap
        //-             .chart-dash
        //-               // <div id="sparkline"></div>
        //-               #placeholder2(style='width:100%;height:200px;')
        //-             .row
        //-               .col-sm-8
        //-                 .speed
        //-                   h2 Avarage Usage
        //-                   h1
        //-                     | 10%
        //-                     span(style="left:8px;") percent / hours
        //-               .col-sm-4
        //-                 .traffic
        //-                   h2 Charging
        //-                   h1 No
        //-             .row
        //-               .col-sm-4
        //-                 .traffic-rates
        //-                   h4 Current Level
        //-                   h1
        //-                     | 30 %
        //-                     span -1,3 %
        //-               .col-sm-4
        //-                 .traffic-rates
        //-                   h4 Remaining
        //-                   h1
        //-                     | 5 H
        //-                     span -1,2 H
        //-               .col-sm-4
        //-                 .traffic-rates
        //-                   h4 Used
        //-                   h1
        //-                     | 3 H
        //-                     span 1,0.5 H  





            //- .sm-7
            //-     #siteClose.nest
            //-       .title-alt
            //-         h6
            //-           span.fontawesome-truck
            //-           |  Speed And Battery Graph
            //-         .titleClose
            //-           a.gone(href='#siteClose')
            //-             span.entypo-cancel
            //-         .titleToggle
            //-           a.nav-toggle-alt(href='#graph1')
            //-             span.entypo-up-open
            //-       #graph1.body-nest.body-graph(style='padding:10px 0;')
            //-         .row
            //-           .col-md-6
            //-             #speedGraph.graphContainer
            //-           .col-md-6
            //-             #batteryGraph.graphContainer

        //- .content-wrap(style="margin-top:350px;")
        //-   .row
        //-     .sm-7
        //-         #siteClose.nest
        //-           .title-alt
        //-             h6
        //-               span.fontawesome-truck
        //-               |  Battery Graph
        //-             .titleClose
        //-               a.gone(href='#siteClose')
        //-                 span.entypo-cancel
        //-             .titleToggle
        //-               a.nav-toggle-alt(href='#graph2')
        //-                 span.entypo-up-open
        //-           #graph2.body-nest(style='max-height:300px;padding:10px 0;')
        //-             #batteryGraph(style="padding: 0 10px;")
            

          //- .sm-4
          //-   .weather-wrap
          //-     .row  
          //-       .col-sm-12
          //-         .temperature
          //-           b Monday
          //-           | , 07:30 AM
          //-           span F
          //-           span
          //-             b C
          //-     .row
          //-       .col-sm-4
          //-         .weather-icon
          //-           i.wi-day-lightning
          //-       .col-sm-8
          //-         .weather-text
          //-           h2
          //-             | Berlin
          //-             br
          //-             i Day Lightning
          //-     .row
          //-       .col-sm-12
          //-         .weather-text
          //-           h3
          //-             i.wi-thermometer
          //-             | 18
          //-             i.wi-celcius
              
        .footer-space
        #footer
          .devider-footer-left
          .time
            p#spanDate
            p#clock
          .copyright
            
            span &copy;
            | 2017 | 
            
            |  All Rights Reserved
          .devider-footer
        // / END OF FOOTER
    // END OF PAPER WRAP
    // RIGHT SLIDER CONTENT
    //- .sb-slidebar.sb-right
    //-   .right-wrapper
    //-     .row
    //-       h3
    //-         span
    //-           i.entypo-gauge
    //-           |   MAIN WIDGET
    //-       .col-sm-12
    //-         .widget-knob
    //-           span.chart(style='position:relative', data-percent='86')
    //-             span.percent
    //-         .widget-def
    //-           b Distance traveled
    //-           br
    //-           i 86% to the check point
    //-         .widget-knob
    //-           span.speed-car(style='position:relative', data-percent='60')
    //-             span.percent2
    //-         .widget-def
    //-           b The average speed
    //-           br
    //-           i 30KM/h avarage speed
    //-         .widget-knob
    //-           span.overall(style='position:relative', data-percent='25')
    //-             span.percent3
    //-         .widget-def
    //-           b Overall result
    //-           br
    //-           i 30KM/h avarage Result
    // END OF RIGHT SLIDER CONTENT
    script(type='text/javascript', src='http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.js')
    script(src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js")
    script(type='text/javascript', src='https://cdn.jsdelivr.net/momentjs/latest/moment.min.js')
    script(type='text/javascript', src='https://cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.js')
    //- script(src="https://canvasjs.com/assets/script/canvasjs.min.js")
    //- script(type='text/javascript', src='assets/js/chart/realTime.js')

    script(src='assets/js/progress-bar/src/jquery.velocity.min.js')
    script(src='assets/js/progress-bar/number-pb.js')
    script(src='assets/js/progress-bar/progress-app.js')
    // MAIN EFFECT
    script(type='text/javascript', src='assets/js/preloader.js')
    //- script(type='text/javascript', src='assets/js/bootstrap.js')
    script(src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js", integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa", crossorigin="anonymous")

    script(type='text/javascript', src='assets/js/app.js')
    script(type='text/javascript', src='assets/js/load.js')
    script(type='text/javascript', src='assets/js/main.js')
    // GAGE
    script(type='text/javascript', src='assets/js/chart/jquery.flot.js')
    script(type='text/javascript', src='assets/js/chart/jquery.flot.resize.js')
    script(type='text/javascript', src='js/bootstrap-datepicker.min.js')

    //- script(type='text/javascript', src='assets/js/speed/canvasgauge-coustom.js')
    script(type='text/javascript', src='assets/js/countdown/jquery.countdown.js')
    script(src='assets/js/jhere-custom.js')
    script(src="https://cdnjs.cloudflare.com/ajax/libs/postscribe/2.0.8/postscribe.min.js")
    //- script(src='https://maps.googleapis.com/maps/api/js?key=AIzaSyDhTRYIz4znpMwkFxBwkNbMV-Otp5_vvsI&callback=myMap1'). 

    //- script.
    //-   var gauge4 = new Gauge("canvas4", {
    //-   'mode': 'needle',
    //-   'range': {
    //-   'min': 0,
    //-   'max': 90
    //-   }
    //-   });
    //-   gauge4.draw(Math.floor(Math.random() * 90));
    //-   var run = setInterval(function() {
    //-   gauge4.draw(Math.floor(Math.random() * 90));
    //-   }, 3500);
    
    script.
      devices = !{JSON.stringify(devices)};

      function dynamic(){
        dbtn = document.getElementById("devicebtn");
        dbtn.style.display="block";
        dsel = document.getElementById("deviceselect");
        gval = document.getElementById("groupselect").value;
        console.log(gval);
        for(i=0;i<devices.length;i++){
        if(devices[i].group==gval){
        console.log("found d");
        option= document.createElement("option");
        option.value=devices[i].imei; 
        option.text=devices[i].imei;
        dsel.appendChild(option);
        $("#deviceselect").selectpicker("refresh");
        }
        }

      }
      var gauge4 = new Gauge("canvas4", {
      'mode': 'needle',
      'range': {
      'min': 0,
      'max': 90
      }
      });
      gauge4.draw(Math.floor(Math.random() * 90));
      var run = setInterval(function() {
      gauge4.draw(Math.floor(Math.random() * 90));
      }, 3500);

    script(type='text/javascript').
      $('input[name="date"]').daterangepicker({"opens": "left"});
      $('.daterangepicker .ranges').remove();
      var data=!{JSON.stringify(data)} ;
      console.log(data);
      //- data=[];

      //- //- data = !{JSON.stringify(data)};
      //- //- data=JSON.parse(data[0]);
      //- //- console.log(data);
      var map;
      var mark;
      var pmark;
      var lineCoords = [];
      var timer;

      //- //- lineCoords = data;
      //- //- for(i=2;i<data.length;i++){
      //- //- lineCoords.push(new google.maps.LatLng(Number(data[i].latitude), Number(data[i].longitude)));
      //- //- }
      //- //- console.log(lineCoords);
      //- setInterval(function(){
      //- var dynamicdata={};
      //- $.ajax({
      //-       url: "http://localhost:8000/_up/"+a,
      //-       type: 'GET',
      //-       success: function(res) {
                

      //-           console.log(res.data);
      //-           console.log(typeof(res.data));
      //-           //- data = JSON.parse(res.data);
      //-           data = res.data;
      //-           //- console.log(data[0].latitude);

      //-           //- dynamicdata.latitude=res.data.latitude;
      //-           //- dynamicdata.longitude=res.data.longitude;
      //-           //- dynamicdata.speed = res.data.speed;
      //-           //- console.log(dynamicdata);
      //-           //- console.log(Number(dynamicdata.latitude));
      //-           //- myMap(dynamicdata);
      //-           //- map  = new google.maps.Map(document.getElementById('googleMap'), {center:{lat:res.data.latitiude,lng:res.data.longitude},zoom:5});
      //-           //- mark = new google.maps.Marker({position:{lat:res.data.latitude, lng:res.data.longitude}, map:map});
      //-           //- lineCoords.push(new google.maps.LatLng(res.data.latitude, res.data.longitude));
      //-           map.setCenter({lat:Number(data[0].latitude), lng:Number(data[0].longitude)});
      //-           mark.setPosition({lat:Number(data[data.length-1].latitude), lng:Number(data[data.length-1].longitude)});
      //-           for(i=0;i<data.length;i++){
      //-           lineCoords.push(new google.maps.LatLng(Number(data[i].latitude), Number(data[i].longitude)));
      //-           }
      //-           var lineCoordinatesPath = new google.maps.Polyline({
      //-           path: lineCoords,
      //-           geodesic: true,
      //-           strokeColor: '#2E10FF'
      //-         });
              
      //-           lineCoordinatesPath.setMap(map);
                //- var c=document.getElementById("canvas4");
                //- var ctx=c.getContext("2d");

                //- ctx.fillStyle = "#FFA200";
                //- ctx.font = "60px Open Sans";
                
                //- ctx.clearRect(0,0,c.width,c.height);   

                //- ctx.fillText(data[data.length-1].speed, 1,50);
                

      //-       }
            
      //-   });
      //-   },1000);

        function myMap1(){
          map  = new google.maps.Map(document.getElementById('googleMap'), {center:{lat:Number(data[0].latitude) , lng:Number(data[0].longitude)},zoom:5});
          mark = new google.maps.Marker({position:{lat:Number(data[data.length-1].latitude), lng:Number(data[data.length-1].longitude)}, map:map});
          //- lineCoords.push(new google.maps.LatLng(res.data.latitude, res.data.longitude));
          for(i=0;i<data.length;i++){
            lineCoords.push(new google.maps.LatLng(Number(data[i].latitude), Number(data[i].longitude)));
          }
                  var lineCoordinatesPath = new google.maps.Polyline({
                  path: lineCoords,
                  geodesic: true,
                  strokeColor: '#2E10FF'
                });
                
                  lineCoordinatesPath.setMap(map);

        }
        var j=0;
        function execute(){
             timer = setTimeout(function () {
                       //- alert(array[i]);
                    console.log(data[j]);

                mark.setPosition({lat:Number(data[j].latitude), lng:Number(data[j].longitude)});
                       j++;
                       if (data.length > j){
                           execute();
                       }
                       if(j==data.length){
                       j=0;
                       $('#play').text('Play');
                       //- mark.setMap(null);
                       }
                   }, 500);
        }



        $('#play').click(function(){
            if ($(this).text() == 'Pause'){
              clearTimeout(timer);
              $(this).text('Play');
            } 
          else if($(this).text() == 'Play'){
            //- mark = new google.maps.Marker({position:{lat:Number(data[0].latitude), lng:Number(data[0].longitude)}, map:map, icon:'marker/mm_20_red.png'});
            //- console.log(data);
            execute();
            $(this).text('Pause');
            }
          //- else {
          //-     execute();
          //-     $(this).text('pause');
          //-   }
        //- execute(data,i);

        });     

    script(src='https://maps.googleapis.com/maps/api/js?key=AIzaSyDhTRYIz4znpMwkFxBwkNbMV-Otp5_vvsI&callback=myMap1')
    script.
      myMap1();




    
    //- script(type='text/javascript').
    //-   var output, started, duration, desired;
    //-   // Constants
    //-   duration = 5000;
    //-   desired = '50';
    //-   // Initial setup
    //-   output = $('#speed');
    //-   started = new Date().getTime();
    //-   // Animate!
    //-   animationTimer = setInterval(function() {
    //-   // If the value is what we want, stop animating
    //-   // or if the duration has been exceeded, stop animating
    //-   if (output.text().trim() === desired || new Date().getTime() - started > duration) {
    //-   console.log('animating');
    //-   // Generate a random string to use for the next animation step
    //-   output.text('' + Math.floor(Math.random() * 60)
    //-   );
    //-   } else {
    //-   console.log('animating');
    //-   // Generate a random string to use for the next animation step
    //-   output.text('' + Math.floor(Math.random() * 120)
    //-   );
    //-   }
    //-   }, 5000);
    script(type='text/javascript').
      $('#getting-started').countdown('2015/01/01', function(event) {
      $(this).html(event.strftime(
      '<span>%M</span>' + '<span class="start-min">:</span>' + '<span class="start-min">%S</span>'));
      });
      $('#form-container .input-group.date').datepicker({
        todayHighlight: true
      });
      $('.selectpicker').selectpicker();
      $('#googleMap').css({'margin-top': '10px'});
      //- window.onload = function () {

      //- var dps = []; // dataPoints

      //- var chart1 = new CanvasJS.Chart("speedGraph",{			
      //-   data: [{
      //-     type: "line",
      //-     dataPoints: dps 
      //-   }],
      //-   axisX:{
      //-     title: "Time",
      //-     margin: 10,
      //-   },
      //-   axisY:{
      //-     title: "kilometer",
      //-     margin: 10,
      //-   }
      //- });

      //- var chart2 = new CanvasJS.Chart("batteryGraph",{			
      //-   data: [{
      //-     type: "line",
      //-     dataPoints: dps 
      //-   }],
      //-   axisX:{
      //-     title: "Time",
      //-     margin: 10,
      //-   },
      //-   axisY:{
      //-     title: "Percentage",
      //-     margin: 10,
      //-   }
      //- });

      //- var xVal = 0;
      //- var yVal = 100;	
      //- var updateInterval = 100;
      //- var dataLength = 500; // number of dataPoints visible at any point

      //- var updateChart = function (count) {
      //-   count = count || 1;
      //-   // count is number of times loop runs to generate random dataPoints.
        
      //-   for (var j = 0; j < count; j++) {	
      //-     yVal = yVal +  Math.round(5 + Math.random() *(-5-5));
      //-     dps.push({
      //-       x: xVal,
      //-       y: yVal
      //-     });
      //-     xVal++;
      //-   };
      //-   if (dps.length > dataLength)
      //-   {
      //-     dps.shift();				
      //-   }
        
      //-   chart1.render();
      //-   chart2.render();		

      //- };

      //- // generates first set of dataPoints
      //- updateChart(dataLength);

      //- // update chart after specified time. 
      //- setInterval(function(){updateChart(); $(".canvasjs-chart-credit").remove(); }, updateInterval); 

      //- var biggestHeight = 0;
      //- $(".graphContainer .canvasjs-chart-canvas").each(function(){
      //- if ($(this).height() > biggestHeight ) {
      //-   biggestHeight = $(this).height();
      //- }
      //- });
      //- $(".body-graph").height(biggestHeight);

      //- }
    //- script(type='text/javascript').
    //-   $('#getting-started').countdown('2015/01/01', function(event) {
    //-   $(this).html(event.strftime(
    //-   '<span>%M</span>' + '<span class="start-min">:</span>' + '<span class="start-min">%S</span>'));
    //-   });
    //-   $('#form-container .input-group.date').datepicker({
    //-     todayHighlight: true
    //-   });

      


