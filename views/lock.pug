doctype html
html(lang='en')
	head
		meta(charset='utf-8')
		title MiiTrace
		meta(name='viewport', content='width=device-width, initial-scale=1.0')
		meta(name='description', content='')
		meta(name='author', content='')
		style(type='text/css').
			body {
			overflow:hidden!important;
			padding-top: 120px;
			}
			.lockscreen-image img{
				height: 100px;
			}
		// Le styles
		script(type='text/javascript', src='assets/js/jquery.min.js')
		link(rel='stylesheet', href='assets/css/style.css')
		link(rel='stylesheet', href='assets/css/loader-style.css')
		link(rel='stylesheet', href='assets/css/bootstrap.css')
		link(rel='stylesheet', href='assets/css/signin.css')
		link(rel='stylesheet', href='assets/css/extra-pages.css')
		// HTML5 shim, for IE6-8 support of HTML5 elements
		//if lt IE 9
			script(src='http://html5shim.googlecode.com/svn/trunk/html5.js')
		// Fav and touch icons
		link(rel='shortcut icon', href='assets/ico/minus.png')
	body#lock
		// Preloader
		#preloader
			#status Â 
		// Main content
		section.page-error
			#time.headline-lock.text-center
				span
				// Time auto generated by js
			// /.headline
			.lockscreen-name John Doe
			.lockscreen-image
				img(src='http://api.randomuser.me/portraits/thumb/men/41.jpg', alt='user image')
			// User name
			// START LOCK SCREEN ITEM
			.lockscreen-item
				// lockscreen credentials (contains the form)
				.lockscreen-credentials
					.input-group
						input.form-control(type='password', placeholder='password' class="lockPassword")
						.input-group-btn
							button.btn.btn-flat.lockLogin
								i.fa.fa-arrow-right.text-muted
				// /.lockscreen credentials
			// /.lockscreen-item
			.lockscreen-link
				a.lock-link(href='/') Or sign in as a different user
		// END OF PAPER WRAP
		script(type='text/javascript', src='assets/js/load.js')
		script(type='text/javascript', src='assets/js/main.js')
		script(type='text/javascript').

			$(function() {
				function readCookie(name) {
						var nameEQ = name + "=";
						var ca = document.cookie.split(';');
						for (var i = 0; i < ca.length; i++) {
								var c = ca[i];
								while (c.charAt(0) == ' ') c = c.substring(1, c.length);
								if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
						}
						return null;
				}
				function renderCookies(){
					$('.lockscreen-name').text(readCookie('lock_user_name'));
					$('.lockscreen-image').children('img').attr('src',readCookie('lock_profile_pic_url'));
					
				}
				$('.lockLogin').on('click',function(){
					
					$.post( "/lock", {username:readCookie('lock_user_name'),password:$('.lockPassword').val()
					},function( data ) { window.location.href = '/';});
				});
			startTime();
			renderCookies();
			$(".center").center();
			$(window).resize(function() {
			$(".center").center();
			});
			});
			/*  */
			function startTime() {
			var today = new Date();
			var h = today.getHours();
			var m = today.getMinutes();
			var s = today.getSeconds();
			// add a zero in front of numbers<10
			m = checkTime(m);
			s = checkTime(s);
			//Check for PM and AM
			var day_or_night = (h > 11) ? "PM" : "AM";
			//Convert to 12 hours system
			if (h > 12)
			h -= 12;
			//Add time to the headline and update every 500 milliseconds
			$('#time').html(h + ":" + m + ":" + s + " " + day_or_night);
			setTimeout(function() {
			startTime()
			}, 500);
			}
			function checkTime(i) {
			if (i < 10) {
			i = "0" + i;
			}
			return i;
			}
			/* CENTER ELEMENTS IN THE SCREEN */
			jQuery.fn.center = function() {
			this.css("position", "absolute");
			this.css("top", Math.max(0, (($(window).height() - $(this).outerHeight()) / 2) +
			$(window).scrollTop()) - 30 + "px");
			this.css("left", Math.max(0, (($(window).width() - $(this).outerWidth()) / 2) +
			$(window).scrollLeft()) + "px");
			return this;
			}
