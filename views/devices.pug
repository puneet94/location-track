doctype html
html(lang='en')
	head
		meta(charset='utf-8')
		title MiiTrace
		meta(name='viewport', content='width=device-width, initial-scale=1.0')
		meta(name='description', content='')
		meta(name='author', content='')
		meta(http-equiv="cache-control", content="max-age=0")
		meta(http-equiv="cache-control", content="no-cache")
		meta(http-equiv="expires", content="0")
		meta(http-equiv="expires", content="Tue, 01 Jan 1980 1:00:00 GMT")
		meta(http-equiv="pragma", content="no-cache")
		// Le styles
		link(rel='stylesheet', href='assets/css/style.css')
		link(rel='stylesheet', href='assets/css/loader-style.css')
		//- link(rel='stylesheet', href='assets/css/bootstrap.css')
		link(rel="stylesheet", href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u", crossorigin="anonymous")

		link(rel='stylesheet', type='text/css', href='assets/js/progress-bar/number-pb.css')
		//- link(rel='stylesheet', type='text/css', href='css/bootstrap-datepicker3.min.css')
		link(type='text/css', rel='stylesheet', href='https://cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.css')
		link(type='text/css', rel='stylesheet', href='css/font-awesome.css')
		link(rel="stylesheet" href="https://cdn.anychart.com/css/7.14.0/anychart-ui.min.css")



		style(type='text/css').
			.circleShape{
				position: relative;
				width: 72px;
				left: 1px;
				height: 72px;
				border:5px solid white;
				border-radius: 50%;
			}
			.circles-text{
				position: absolute;
				text-align: center;
				width: 100%;
				font-size: 25px;
				height: 72px;
				line-height: 65px;
				color: white;
				font-weight: 700;				
			}
			canvas#canvas4 {
			position: relative;
			top: 20px;
			}
			.col-lg-1, .col-lg-2, .col-lg-3, .col-lg-4, .col-lg-5, .col-lg-6, .col-lg-7, .col-lg-8, .col-lg-9, .col-lg-10, .col-lg-11, .col-lg-12{
			padding:5px !important;
			}
			.anychart-credits{
			display:none;
			}
			.heading-text-different-color{
				color: #ff4c4c;
			}
			.most-triggered .col-lg-8:last-child p, .most-triggered .col-lg-4:last-child p,.most-triggered-falls .col-lg-8:last-child p, .most-triggered-falls .col-lg-4:last-child p{
				margin-bottom:0px!important;
			}
			.circles-text{
			color:white;
			}
			.most-triggered .col-lg-9 p{
				color: #7ec0ee;
			}
			.most-triggered .col-lg-3 p{
				color: #FB6D86;
			}
			.most-triggered-falls .col-lg-9 p{
				color: #7ec0ee;
			}
			.most-triggered-falls .col-lg-3 p{
				color: #3232ff;
			}
			.user-least-active .col-lg-5{
				color: #7ec0ee;
			}
			.notification-row-wrapper:last-child div{
				border-bottom: none!important;
			} 
			.notification-row-wrapper div{
				border-bottom: 1px solid #f2f2f2!important;
			}
			.notification-row-wrapper i{
				margin-bottom: 13px;
			}
			.notification-row-wrapper .col-lg-4:first-child p{
				color: #7ec0ee;
			}
			.most-triggered p, .most-triggered-falls p, .user-least-active p{
				margin-bottom:0;
			}
			.most-triggered div, .most-triggered-falls div, .user-least-active div{
				padding-bottom: 3px!important;
			}

		// HTML5 shim, for IE6-8 support of HTML5 elements
		//if lt IE 9
			script(src='http://html5shim.googlecode.com/svn/trunk/html5.js')
		// Fav and touch icons
		link(rel='shortcut icon', href='assets/ico/minus.png')
	body
		#sound(style="")
		// Preloader
		#preloader
			#status  
		// TOP NAVBAR
		nav.navbar.navbar-static-top(role='navigation')
			.container-fluid
				// Brand and toggle get grouped for better mobile display
				.navbar-header
					button.navbar-toggle(data-target='#bs-example-navbar-collapse-1', data-toggle='collapse', type='button')
						span.entypo-menu
					button.navbar-toggle.toggle-menu-mobile.toggle-left(type='button')
						span.entypo-list-add
				// Collect the nav links, forms, and other content for toggling
				#bs-example-navbar-collapse-1.collapse.navbar-collapse
					ul.nav.navbar-nav
						li
							
					#nt-title-container.navbar-left.running-text.visible-lg
						ul.date-top
							li.entypo-calendar(style='margin-right:5px')
							li#Date
						ul#digital-clock.digital
							li.entypo-clock(style='margin-right:5px')
							li.hour
							li :
							li.min
							li :
							li.sec
							li.meridiem
						ul#nt-title
							li
								i.wi-day-lightning
								|   London
								b 85
								i.wi-fahrenheit
								|  ; 15km/h
							li
								i.wi-day-lightning
								|   Kent 
								b 85
								i.wi-fahrenheit
								|  ; Tonight- 72 °F (22.2 °C)
							li
								i.wi-day-lightning
								|   Manchester 
								b 85
								i.wi-fahrenheit
								|  ; 15km/h
							li
								i.wi-day-lightning
								|   Brimingham
								b 85
								i.wi-fahrenheit
								|  ; 15km/h
							li
								i.wi-day-lightning
								|   Liverpool 
								b 85
								i.wi-fahrenheit
								|  ; 15km/h
					ul.nav.navbar-nav.navbar-right(style='margin-right:0;')
						li
							a.dropdown-toggle(data-toggle='dropdown', href='#')
								img.admin-pic.img-circle(alt='', src=pic)
								| Hi, #{user_name}
								b.caret
							ul.dropdown-setting.dropdown-menu(style='margin-top:14px;', role='menu')
								li
									a(href='/profile')
										span.entypo-user
										|   My Profile
								li
									a(href='#') 
										span.entypo-vcard
										|   Change password
								
								li.divider
								li
									a(href='/logout')
										span.entypo-logout
										|   Logout

								
						li
							a.dropdown-toggle(data-toggle='dropdown', href='#')
								span.icon-gear
								|   Settings
							ul.dropdown-setting.dropdown-menu(role='menu')
								li.theme-bg
									#button-bg
									#button-bg2
									#button-bg3
									#button-bg5
									#button-bg6
									#button-bg7
									#button-bg8
									#button-bg9
									#button-bg10
									#button-bg11
									#button-bg12
									#button-bg13
						//- li.hidden-xs
						//-   a.toggle-left(href='#')
						//-     span.entypo-list-add(style='font-size:20px;')
				// /.navbar-collapse
			// /.container-fluid
		// /END OF TOP NAVBAR
		// SIDE MENU
		#skin-select
			#logo.text-center(style="margin-top:31px;")
				h1(style="font-size:20px;")
					span(style="background:none;border-radius:0;font-size:17px;padding:0 0;position:static;text-transform:lowercase;") Mii
					|Dashboard
					p
			a#toggle
				span.entypo-menu
			.dark
			
					
			.skin-part
				#tree-wrap
					.side-bar
						ul.topnav.menu-left-nest                
							
							li
								a.tooltip-tip.ajax-load(href='/devices', title='Dashboard')
									i.icon-window
									span Dashboard
							li
								a.tooltip-tip.ajax-load(href='/addgroup', title='addgroup')
									i.icon-view-thumb
									span Add Group
							li
								a.tooltip-tip.ajax-load(href='/adddevice', title='adddevice')
									i.icon-view-thumb
									span Add Device
							li
								a.tooltip-tip(href='#', title='Groups')
									i.icon-user-group
									span Groups
								ul
									for g in groups
										li
											a.tooltip-tip2.ajax-load(href='/groups/'+g.group_name, title=g.group_name)
												i.icon-user
												span #{g.group_name}
							li
								a.tooltip-tip2.ajax-load(href='/profile', title='Profile Page')
									i.icon-user
									span Profile 

							li
								a.tooltip-tip2.ajax-load(href='/track', title='Live Tracking')
									i.icon-user
									span Live Tracking 

							li
								a.tooltip-tip2.ajax-load(href='/history', title='Device Hisory')
									i.icon-user
									span Device Hisory
							li
								a.tooltip-tip2(href='/lock', title='Lock Screen')
									i.icon-lock
									span Lock Screen
							li
								a.tooltip-tip2(href='/addfence', title='Create Fence')
									i.icon-lock
									span Create Fence
							//- li
							//-   a.tooltip-tip(href='/logout', title='logout')
							//-     i.icon-download
							//-     span Logout

							
						
		// END OF SIDE MENU
		// PAPER WRAP
		.wrap-fluid
			.container-fluid.paper-wrap.bevel.tlbr
				// CONTENT
				// TITLE
				.row
					#myNotificationModal.modal.fade(role='dialog' )
						.modal-dialog
							// Modal content
							.modal-content
								.modal-header
									button.close(type='button', data-dismiss='modal') ×
									h4.modal-title Modal Header
								.modal-body
									#modalNotificationContent(style='height:500px;overflow-y:scroll;')
								.modal-footer
									button.btn.btn-default(type='button', data-dismiss='modal') Close

				.row
					#paper-top
						.col-sm-2(style="padding-right:0px;")
								h2.tittle-content-header(style="margin-top:6px;")
									i.icon-window
									span.text-right
										| Dashboard

						.col-sm-6(style="margin-top:6px;")
							//- .devider-vertical.visible-lg
							.quick-access-buttons-wrapper
								.col-sm-2.col-sm-offset-1(style="padding-left:5px;padding-right:5px;")
									.quick-access-button-wrapper.active(data-notify="2" data-getnotif="falls").text-center
										.quick-access-button-wrapper-notif-div.fall-class ...
										.quick-access-button-image-wrapper.center-block
											img.image-responsive(src="assets/ico/slide.png")
										.quick-access-button-text-wrapper
											span Falls

								.col-sm-2(style="padding-left:0px;padding-right:5px;")
									.quick-access-button-wrapper.active(data-notify="3" data-getnotif="lowbattery").text-center
										.quick-access-button-wrapper-notif-div.battery_alarm-class ...
										.quick-access-button-image-wrapper.center-block
											img.image-responsive(src="assets/ico/battery-warning.png")
										.quick-access-button-text-wrapper
											span Low Battery

								.col-sm-2(style="padding-left:0px;padding-right:5px;")
									.quick-access-button-wrapper.active(data-notify="1" data-getnotif="sos").text-center
										.quick-access-button-wrapper-notif-div.sos-class ...
										.quick-access-button-image-wrapper.center-block
											img.image-responsive(src="assets/ico/telephone.png")
										.quick-access-button-text-wrapper
											span SOS

								.col-sm-2(style="padding-left:0px;padding-right:5px;")
									.quick-access-button-wrapper.active(data-notify="7" data-getnotif="power").text-center
										.quick-access-button-wrapper-notif-div ...
										.quick-access-button-image-wrapper.center-block
											img.image-responsive(src="assets/ico/power-cord.png")
										.quick-access-button-text-wrapper
											span Power on/off

								.col-sm-2(style="padding-left:0px;padding-right:5px;")
									.quick-access-button-wrapper.active(data-notify="8" data-getnotif="geofence").text-center
										.quick-access-button-wrapper-notif-div ...
										.quick-access-button-image-wrapper.center-block
											img.image-responsive(src="assets/ico/locations.png")
										.quick-access-button-text-wrapper
											span Geofence  
						.col-sm-3
							//- .devider-vertical.visible-lg
							form(action="")
									input.form-control(type="text", name="date" required,style="margin-top:-2px;")
						.col-sm-1
							.row   
								button.btn.btn-info(type="submit",style="margin-top:-2px;") Get data

								//- .alert
									button.close(type='button', data-dismiss='alert') ×
									span.tittle-alert.entypo-info-circled
									|                                   Welcome back,
									if user 
										strong  #{user.username}
									|  
				//- #paper-middle
				//-   #mapContainer
				
				

				.row()
					.col-lg-6(style="padding-right:0px!important;")
						//- .row
							//- div(style="width:18%; display:inline-block;")
							//-   div(style="background-color:skyblue; height:200px; border-radius:10px; width:100%;")
							//- div(style="width:18%; display:inline-block;")
							//-   div(style="background-color:skyblue; height:200px; border-radius:10px; width:100%;")
							//- div(style="width:30%; display:inline-block;")
							//-   div(style="background-color:skyblue; height:200px; border-radius:10px; width:100%;")
							//- div(style="width:18%; display:inline-block;")
							//-   div(style="background-color:skyblue; height:200px; border-radius:10px; width:100%;")
						.col-lg-2() 
							div(style="background-color:#8080ff; height:200px; border-radius:10px; width:100%; text-align:center;")
								div(id="circle" class="online-devices circleShape" style="position:relative; top:30px;")
									.circles-text
								p(style="text-align:center; position:relative; top:50px; color:white;")
									strong Devices
									br
									strong Online


						.col-lg-2()
							div(style="background-color:#ff8080; height:200px; border-radius:10px; width:100%; text-align:center;")
								div(id="circle" class="offline-devices circleShape" style="position:relative; top:30px;")
									.circles-text
								p(style="text-align:center; position:relative; top:50px; color:white;")
									strong Devices
									br
									strong Offline

						.col-lg-4()
							div.most-triggered(style="background-color:white; height:200px; border-radius:10px; width:100%;overflow-y:auto;padding:5px;")
								.col-lg-12(style="margin-bottom:10px!important;")
									p 
										strong Most triggered 
											span.heading-text-different-color  SOS (wk)
								.data-most-sos

								//- .col-lg-8
								//-   p Jennifer Martin
								//- .col-lg-4
								//-   p 18
								//- .col-lg-8
								//-   p Carol Jenkins
								//- .col-lg-4
								//-   p 14
								//- .col-lg-8
								//-   p Rob Bonner
								//- .col-lg-4
								//-   p 06
								//- .col-lg-8
								//-   p Richard Murphy
								//- .col-lg-4
								//-   p 19  
								//- .col-lg-8
								//-   p Sussaine
								//- .col-lg-4
								//-   p 17                

							
						.col-lg-4()
							div.most-triggered-falls(style="background-color:white; height:200px; border-radius:10px; width:100%;overflow-y:auto;padding:5px;")
								.col-lg-12(style="margin-bottom:10px!important;")
									p 
										strong Most triggered 
											span.heading-text-different-color  falls (wk)
								.data-most-fall
								//- .col-lg-8
								//-   p Sue Hall
								//- .col-lg-4
								//-   p 10
								//- .col-lg-8
								//-   p Rachel Bond
								//- .col-lg-4
								//-   p 18
								//- .col-lg-8
								//-   p Annie Cheng
								//- .col-lg-4
								//-   p 17
								//- .col-lg-8
								//-   p David Wall
								//- .col-lg-4
								//-   p 09       
								//- 
								//- .col-lg-8
								//-   p Time pane
								//- .col-lg-4
								//-   p 03                     
						//- .row
						.col-lg-12()
							div(style="background-color:white; height:400px; border-radius:10px; width:100%;padding:10px;")
								p 
									strong Devices current
										span.heading-text-different-color  location
										
								#googleMap(style="width:100%; height:350px;")
					.col-lg-6(style="padding-left:0px!important;")
						.col-lg-6()
							div.most-visited-places(style="background-color:white; height:300px; border-radius:10px; width:100%;overflow-y:auto;padding:5px;")
								.col-lg-9
									p 
										strong Most visited
											span.heading-text-different-color  places
								#donutchart(style="width:100%; height:255px; border-radius:10px;")
							
						.col-lg-6()
							div.user-least-active(style="background-color:white; height:300px; border-radius:10px; width:100%; overflow-y:auto;padding:5px;")
								.col-lg-12(style="margin-bottom:10px!important;")
									p 
										strong User least
											span.heading-text-different-color  active (days)
								//- .col-lg-4
								//- .col-lg-6
								//- .col-lg-3
								//-   p 
								//-     strong.heading-text-different-color Steps

								.col-lg-5.col-lg-offset-4(style="margin-bottom:10px!important;")
									p.pull-right(style="color:#9ea7b3;") Calorie Target
								.col-lg-3
									p Distance

								.col-lg-5
									p Rob Beer
							
								.col-lg-5
									.progress
										.progress-bar(role='progressbar', aria-valuenow='30', aria-valuemin='0', aria-valuemax='100', style='width:30%')
											| 30%

								.col-lg-2
									p 189
							
								.col-lg-5
									p Rachel Bond
							
								.col-lg-5
									.progress
										.progress-bar(role='progressbar', aria-valuenow='70', aria-valuemin='0', aria-valuemax='100', style='width:70%')
											| 70%

								.col-lg-2
									p 257

								.col-lg-5
									p Sue Hall
							
								.col-lg-5
									.progress
										.progress-bar(role='progressbar', aria-valuenow='86', aria-valuemin='0', aria-valuemax='100', style='width:86%')
											| 86%

								.col-lg-2
									p 200
								
								.col-lg-5
									p Annie Cheng
							
								.col-lg-5
									.progress
										.progress-bar(role='progressbar', aria-valuenow='93', aria-valuemin='0', aria-valuemax='100', style='width:93%')
											| 93%

								.col-lg-2
									p 89

								.col-lg-5
									p Rob Tang
							
								.col-lg-5
									.progress
										.progress-bar(role='progressbar', aria-valuenow='45', aria-valuemin='0', aria-valuemax='100', style='width:45%')
											| 45%

								.col-lg-2
									p 67

								//- .col-lg-5
								//-   p Carol Jenkins
							
								//- .col-lg-5
								//-   .progress
								//-     .progress-bar(role='progressbar', aria-valuenow='80', aria-valuemin='0', aria-valuemax='100', style='width:80%')
								//-       | 80%

								//- .col-lg-2
								//-   p 196

								//- .col-lg-5
								//-   p Sue Sang
							
								//- .col-lg-5
								//-   .progress
								//-     .progress-bar(role='progressbar', aria-valuenow='22', aria-valuemin='0', aria-valuemax='100', style='width:22%')
								//-       | 22%

								//- .col-lg-2
								//-   p 300

								//- .col-lg-5
								//-   p Chang lee
							
								//- .col-lg-5
								//-   .progress
								//-     .progress-bar(role='progressbar', aria-valuenow='22', aria-valuemin='0', aria-valuemax='100', style='width:22%')
								//-       | 29%

								//- .col-lg-2
								//-   p 270
								

								//- .col-lg-4
								//-   p Maria bozzo
								
								//- .col-lg-6
								//-   .progress
								//-     .progress-bar(role='progressbar', aria-valuenow='70', aria-valuemin='0', aria-valuemax='100', style='width:70%')
								//-       | 70%

								//- .col-lg-2
								//-   p 200

								//- .col-lg-4
								//-   p Maria bozzo
								
								//- .col-lg-6
								//-   .progress
								//-     .progress-bar(role='progressbar', aria-valuenow='70', aria-valuemin='0', aria-valuemax='100', style='width:70%')
								//-       | 70%

								//- .col-lg-2
								//-   p 200

								//- .col-lg-4
								//-   p Maria bozzo
								
								//- .col-lg-6
								//-   .progress
								//-     .progress-bar(role='progressbar', aria-valuenow='70', aria-valuemin='0', aria-valuemax='100', style='width:70%')
								//-       | 70%

								//- .col-lg-2
								//-   p 200  

						.col-lg-12()
							div(style="background-color:white; height:300px; border-radius:10px; width:100%; overflow:auto;padding:5px;")
								.col-lg-12
									p.text-left(onclick="playSound();") 
										strong Notification 
											span.heading-text-different-color Alerts
								//- if data
								//-   for d in data
								//-     -if(d.SOS==1)
								//-       .col-lg-3
								//-         p #{d.imei}
								//-       .col-lg-3
								//-         p SOS Alarm
								//-       .col-lg-4
								//-         p #{d.date} #{d.time}
								//-       .col-lg-2
								//-         i.fa.fa-th-list
								//-       hr
								
								.col-lg-12.notifications
									.notification-row-wrapper
										.col-lg-3
											p Rob Beer
											
										.col-lg-3
											p SOS Alarm
											
										.col-lg-4
											p 13:34 23-08-2017
											
										.col-lg-2
											i.fa.fa-th-list

									.notification-row-wrapper
										.col-lg-3
											p Chang lee
											
										.col-lg-3
											p SOS Fall
											
										.col-lg-4
											p 11:32 25-08-2017
											
										.col-lg-2
											i.fa.fa-th-list

									.notification-row-wrapper
										.col-lg-3
											p Sue Sang
											
										.col-lg-3
											p Fence Breach
											
										.col-lg-4
											p 10:23 26-08-2017
											
										.col-lg-2
											i.fa.fa-th-list
									
									.notification-row-wrapper
										.col-lg-3
											p Robert Tang
											
										.col-lg-3
											p Low Battery Alarm
											
										.col-lg-4
											p 14:24 28-08-2017
											
										.col-lg-2
											i.fa.fa-th-list

									.notification-row-wrapper
										.col-lg-3
											p Lee Shang
											
										.col-lg-3
											p SOS Alarm
											
										.col-lg-4
											p 15:14 07-08-2017
											
										.col-lg-2
											i.fa.fa-th-list

									.notification-row-wrapper
										.col-lg-3
											p Sussaine
											
										.col-lg-3
											p Falls Alarm
											
										.col-lg-4
											p 12:24 28-08-2017
											
										.col-lg-2
											i.fa.fa-th-list

									.notification-row-wrapper
										.col-lg-3
											p Sussaine
											
										.col-lg-3
											p Falls Alarm
											
										.col-lg-4
											p 12:24 28-08-2017
											
										.col-lg-2
											i.fa.fa-th-list
									.notification-row-wrapper
										.col-lg-3
											p Ricky jack
											
										.col-lg-3
											p SOS Alarm
											
										.col-lg-4
											p 10:34 24-06-2017
											
										.col-lg-2
											i.fa.fa-th-list

									.notification-row-wrapper
										.col-lg-3
											p Tim pane
											
										.col-lg-3
											p Fence Breach
											
										.col-lg-4
											p 13:53 25-08-2017
											
										.col-lg-2
											i.fa.fa-th-list

									
								
							
				.footer-space
				#footer
					.devider-footer-left
					.time
						p#spanDate
						p#clock
					.copyright
						
						span &copy;
						| 2017 | 
						
						|  All Rights Reserved
					.devider-footer
				// / END OF FOOTER
		// END OF PAPER WRAP
		// RIGHT SLIDER CONTENT
		//- .sb-slidebar.sb-right
		//-   .right-wrapper
		//-     .row
		//-       h3
		//-         span
		//-           i.entypo-gauge
		//-           |   MAIN WIDGET
		//-       .col-sm-12
		//-         .widget-knob
		//-           span.chart(style='position:relative', data-percent='86')
		//-             span.percent
		//-         .widget-def
		//-           b Distance traveled
		//-           br
		//-           i 86% to the check point
		//-         .widget-knob
		//-           span.speed-car(style='position:relative', data-percent='60')
		//-             span.percent2
		//-         .widget-def
		//-           b The average speed
		//-           br
		//-           i 30KM/h avarage speed
		//-         .widget-knob
		//-           span.overall(style='position:relative', data-percent='25')
		//-             span.percent3
		//-         .widget-def
		//-           b Overall result
		//-           br
		//-           i 30KM/h avarage Result
		// END OF RIGHT SLIDER CONTENT
		
		//script(type='text/javascript', src='http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.js')
		
		script(src="/js/jquery.min.js")
		script(type='text/javascript', src='https://cdn.jsdelivr.net/momentjs/latest/moment.min.js')
		script(type='text/javascript', src='https://cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.js')
		script(src='assets/js/progress-bar/src/jquery.velocity.min.js')
		script(src='assets/js/progress-bar/number-pb.js')
		script(src='assets/js/progress-bar/progress-app.js')
		// MAIN EFFECT
		script(type='text/javascript', src='assets/js/preloader.js')
		//- script(type='text/javascript', src='assets/js/bootstrap.js')
		script(src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js", integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa", crossorigin="anonymous")

		script(type='text/javascript', src='assets/js/app.js')
		script(type='text/javascript', src='assets/js/load.js')
		script(type='text/javascript', src='assets/js/main.js')
		script(type='text/javascript', src='assets/js/devices.js')
		
		// GAGE
		script(type='text/javascript', src='assets/js/chart/jquery.flot.js')
		script(type='text/javascript', src='assets/js/chart/jquery.flot.resize.js')
		//- script(type='text/javascript', src='js/bootstrap-datepicker.min.js')

		//- script(type='text/javascript', src='assets/js/speed/canvasgauge-coustom.js')
		script(type='text/javascript', src='assets/js/countdown/jquery.countdown.js')
		script(src='assets/js/jhere-custom.js')
		script(src="https://cdnjs.cloudflare.com/ajax/libs/postscribe/2.0.8/postscribe.min.js")
		script(src="js/circles.min.js")
		script(type="text/javascript", src="https://www.gstatic.com/charts/loader.js")
		script(src="https://cdn.anychart.com/js/7.14.0/anychart-bundle.min.js")

		script.
			function initMap(){
				var i,j;
				markers=[];
									$.ajax({
				type:"GET",
				url:"/devices/location",
				datatype:"json",
				success:function(result)
				{
					map  = new google.maps.Map(document.getElementById('googleMap'),{center: {lat:24.55, lng:1.56},zoom:2});
					for(var j=0;j<result.length;j++){
									console.log(result[j].lat, result[j].long);
									markers[j] = new google.maps.Marker({position:{lat:Number(result[j].lat), lng:Number(result[j].long)}, map:map});
							}
				}
				});
			}
			//- initMap();
			
			//- var gauge4 = new Gauge("canvas4", {
			//- 'mode': 'needle',
			//- 'range': {
			//- 'min': 0,
			//- 'max': 90
			//- }
			//- });
			//- gauge4.draw(Math.floor(Math.random() * 90));
			//- var run = setInterval(function() {
			//- gauge4.draw(Math.floor(Math.random() * 90));
			//- }, 3500);
			
		script(src='https://maps.googleapis.com/maps/api/js?key=AIzaSyDhTRYIz4znpMwkFxBwkNbMV-Otp5_vvsI&callback=initMap' async defer)

		script(type='text/javascript').
		//-   var a=!{id} ;
		//-   data=[];

			data = !{JSON.stringify(data)};
		//-   //- data=JSON.parse(data[0]);
		//-   //- console.log(data);
		//-   var map;
		//-   var mark;
		//-   var lineCoords = [];
		//-   //- lineCoords = data;
		//-   //- for(i=2;i<data.length;i++){
		//-   //- lineCoords.push(new google.maps.LatLng(Number(data[i].latitude), Number(data[i].longitude)));
		//-   //- }
		//-   //- console.log(lineCoords);
		//-   setInterval(function(){
		//-   var dynamicdata={};
		//-   $.ajax({
		//-         url: "http://localhost:8000/_up/"+a,
		//-         type: 'GET',
		//-         success: function(res) {
								

		//-             console.log(res.data);
		//-             console.log(typeof(res.data));
		//-             //- data = JSON.parse(res.data);
		//-             data = res.data;
		//-             //- console.log(data[0].latitude);

		//-             //- dynamicdata.latitude=res.data.latitude;
		//-             //- dynamicdata.longitude=res.data.longitude;
		//-             //- dynamicdata.speed = res.data.speed;
		//-             //- console.log(dynamicdata);
		//-             //- console.log(Number(dynamicdata.latitude));
		//-             //- myMap(dynamicdata);
		//-             //- map  = new google.maps.Map(document.getElementById('googleMap'), {center:{lat:res.data.latitiude,lng:res.data.longitude},zoom:5});
		//-             //- mark = new google.maps.Marker({position:{lat:res.data.latitude, lng:res.data.longitude}, map:map});
		//-             //- lineCoords.push(new google.maps.LatLng(res.data.latitude, res.data.longitude));
		//-             map.setCenter({lat:Number(data[0].latitude), lng:Number(data[0].longitude)});
		//-             mark.setPosition({lat:Number(data[data.length-1].latitude), lng:Number(data[data.length-1].longitude)});
		//-             for(i=0;i<data.length;i++){
		//-             lineCoords.push(new google.maps.LatLng(Number(data[i].latitude), Number(data[i].longitude)));
		//-             }
		//-             var lineCoordinatesPath = new google.maps.Polyline({
		//-             path: lineCoords,
		//-             geodesic: true,
		//-             strokeColor: '#2E10FF'
		//-           });
							
		//-             lineCoordinatesPath.setMap(map);
		//-             var c=document.getElementById("canvas4");
		//-             var ctx=c.getContext("2d");

		//-             ctx.fillStyle = "#FFA200";
		//-             ctx.font = "60px Open Sans";
								
		//-             ctx.clearRect(0,0,c.width,c.height);   

		//-             ctx.fillText(res.data.speed, 6,50);
								

		//-         }
						
		//-     });
		//-     },1000);

		//-     function myMap1(){
		//-       map  = new google.maps.Map(document.getElementById('googleMap'), {center:{lat:14.28 , lng:55.10},zoom:5});
		//-       mark = new google.maps.Marker({position:{lat:14.28, lng:55.10}, map:map});
		//-       //- lineCoords.push(new google.maps.LatLng(res.data.latitude, res.data.longitude));

		//-     }
			
		//-   //-  function myMap(dynamicdata) {
		//-   //-   //- console.log("insdie marker"+dynamicdata.latitude);
		//-   //-   var mark = new google.maps.Marker({
		//-   //-     position: new google.maps.LatLng(Number(dynamicdata.latitude), Number(dynamicdata.longitude)),
		//-   //-     map: map,
		//-   //-     title: 'Hello World!'
		//-   //-   });
		//-   //- }
			myMap1();

		script.
			var myCircle = Circles.create({
				id:                  'circle-1',
				radius:              36,
				value:               100,
				maxValue:            100,
				width:               5,
				text:                function(value){return "4";},
				colors:              ['#D3B6C6', 'white'],
				duration:            400,
				wrpClass:            'circles-wrp',
				textClass:           'circles-text',
				valueStrokeClass:    'circles-valueStroke',
				maxValueStrokeClass: 'circles-maxValueStroke',
				styleWrapper:        true,
				styleText:           true
			});
			var myCircle = Circles.create({
				id:                  'circle-2',
				radius:              36,
				value:               100,
				maxValue:            100,
				width:               5,
				text:                function(value){return "7";},
				colors:              ['#D3B6C6', 'white'],
				duration:            400,
				wrpClass:            'circles-wrp',
				textClass:           'circles-text',
				valueStrokeClass:    'circles-valueStroke',
				maxValueStrokeClass: 'circles-maxValueStroke',
				styleWrapper:        true,
				styleText:           true
			});
			//- google.charts.load("current", {packages:["corechart"]});
			//- google.charts.setOnLoadCallback(drawChart);
			//- function drawChart() {
			//-   var data = google.visualization.arrayToDataTable([
			//-     ['Task', 'Hours per Day'],
			//-     ['Work',     11],
			//-     ['Eat',      2],
			//-     ['Commute',  2],
			//-     ['Watch TV', 2],
			//-     ['Sleep',    7]
			//-   ]);

			//-   var options = {
			//-     title: 'Most Visited Places',
			//-     pieHole: 0.4,
			//-   };

			//-   var chart = new google.visualization.PieChart(document.getElementById('donutchart'));
			//-   chart.draw(data, options);
			//- }
			anychart.onDocumentReady(function() {
				// create pie chart with passed data
				
				chart = anychart.pie([
					['Library', 63],
					['Park', 72],
					['H/street', 14],
					['Hospitals', 78],
					['Stations', 90]
				]);

				var roundBackground = chart.background();
				// set corner type
				roundBackground.cornerType("round");
				roundBackground.corners(10, 10, 10, 10);   // apply corner type only
				// set chart title text settings
				//- chart.title();
					//- .text();
					//- .fontFamily('Helvetica Neue')
					//- .fontSize(13)
					//- .fontStyle('bold');
					
					//set chart radius
					chart.radius('43%');
					// create empty area in pie chart
					chart.innerRadius('30%');
				var labels = chart.labels();  
				// set container id for the chart
				chart.container('donutchart');
				//- labels.fontColor('#9ea7b3');
				labels.fontFamily('Helvetica Neue');
				labels.fontSize(13);
				labels.fontStyle('normal');
				// initiate chart drawing
				chart.draw();
			});

			//- $(window).on('load', function() {
			//-   $('#mapContainer').jHERE({
			//-       center: [52.500556, 13.398889],
			//-       type: 'smart',
			//-       zoom: 10
			//-   }).jHERE('marker', [52.500556, 13.338889], {
			//-       icon: 'assets/img/marker.png',
			//-       anchor: {
			//-           x: 12,
			//-           y: 32
			//-       },
			//-       click: function() {
			//-           alert('Hallo from Berlin!');
			//-       }
			//-   })
			//-       .jHERE('route', [52.711, 13.011], [52.514, 13.453], {
			//-           color: '#FFA200',
			//-           marker: {
			//-               fill: '#86c440',
			//-               text: '#'
			//-           }
			//-       });
			//-   });


		
		//- script(type='text/javascript').
		//-   var output, started, duration, desired;
		//-   // Constants
		//-   duration = 5000;
		//-   desired = '50';
		//-   // Initial setup
		//-   output = $('#speed');
		//-   started = new Date().getTime();
		//-   // Animate!
		//-   animationTimer = setInterval(function() {
		//-   // If the value is what we want, stop animating
		//-   // or if the duration has been exceeded, stop animating
		//-   if (output.text().trim() === desired || new Date().getTime() - started > duration) {
		//-   console.log('animating');
		//-   // Generate a random string to use for the next animation step
		//-   output.text('' + Math.floor(Math.random() * 60)
		//-   );
		//-   } else {
		//-   console.log('animating');
		//-   // Generate a random string to use for the next animation step
		//-   output.text('' + Math.floor(Math.random() * 120)
		//-   );
		//-   }
		//-   }, 5000);
		script(type='text/javascript').
			$('#getting-started').countdown('2015/01/01', function(event) {
			$(this).html(event.strftime(
			'<span>%M</span>' + '<span class="start-min">:</span>' + '<span class="start-min">%S</span>'));
			});
			//- $('#form-container .input-group.date').datepicker({
			//-   todayHighlight: true
			//- });
			$('input[name="date"]').daterangepicker({"opens": "left"});
			$('.daterangepicker .ranges').remove();
			$('.quick-access-button-wrapper').on('click', function(){
				$(this).removeClass('active');
			});
			$.ajax({
				type: "GET",
				url: "/most_sos", 
				dataType: "json",
				success: function(result){
					$('.data-most-sos').html('');
					$.each(result, function(index, value){
						console.log(JSON.stringify(value)+" sos");
						$('.data-most-sos').append('<div class="col-lg-9"><p>'+value.member_name+'</p></div><div class="col-lg-3">'+value.count+'</div>');
					});
				}
			});
			$.ajax({
				type: "GET",
				url: "/most_fall", 
				dataType: "json",
				success: function(result){
					$('.data-most-fall').html('');
					$.each(result, function(index, value){
						console.log(JSON.stringify(value)+" falls");
						$('.data-most-fall').append('<div class="col-lg-9"><p>'+value.member_name+'</p></div><div class="col-lg-3">'+value.count+'</div>');
					});
				}
			});
			$.ajax({
				type: "GET",
				url: "/notification_alert", 
				dataType: "json",
				success: function(result){
					$('.notifications').html('');
					 result.sort(function(a,b){
					var x=b.date.toString();
					var y=b.time.toString();
						var time=y.split(":");
						var date=x.split("/");
						var x1=a.date.toString();
						var y1=a.time.toString();
						var time1=y1.split(":");
						var date1=x1.split("/");
				return new Date(date[2],date[1],date[0],time[0],time[1],time[2],0).getTime() - new Date(date1[2],date1[1],date1[0],time1[0],time1[1],time1[2],0).getTime()  
					});
					$.each(result, function(index, value){
						console.log(JSON.stringify(value)+" notifications");
						if(value.SOS == "1")  
							$('.notifications').append('<div class="notification-row-wrapper"> <div class="col-lg-4"> <p>'+value.imei+'</p></div><div class="col-lg-3"> <p>SOS Alarm</p></div><div class="col-lg-4"> <p>'+value.time+' '+value.date+'</p></div><div class="col-lg-1"><a href="single_log/'+value._id+'"><i class="fa fa-th-list"></i></a></div></div>');
						if(value.battery_alarm == "1")  
							$('.notifications').append('<div class="notification-row-wrapper"> <div class="col-lg-4"> <p>'+value.imei+'</p></div><div class="col-lg-3"> <p>Low Battery Alarm</p></div><div class="col-lg-4"> <p>'+value.time+' '+value.date+'</p></div><div class="col-lg-1"><a href="single_log/'+value._id+'"><i class="fa fa-th-list"></i></a></div></div>');
						if(value.fall == "1")
							$('.notifications').append('<div class="notification-row-wrapper"> <div class="col-lg-4"> <p>'+value.imei+'</p></div><div class="col-lg-3"> <p>SOS Fall</p></div><div class="col-lg-4"> <p>'+value.time+' '+value.date+'</p></div><div class="col-lg-1"><a href="single_log/'+value._id+'"><i class="fa fa-th-list"></i></a></div></div>');
					});
				}
			});
			function playSound(){   
				var filename = "assets/beep-01a";
				document.getElementById("sound").innerHTML='<audio autoplay="autoplay"><source src="' + filename + '.mp3" type="audio/mpeg"/><embed hidden="true" autostart="true" loop="false" src="' + filename +'.mp3"/></audio>';
			}
		 
			
